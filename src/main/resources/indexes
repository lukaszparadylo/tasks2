DELIMITER $$
DROP PROCEDURE IF EXISTS FillBooks;
CREATE PROCEDURE FillBooks()
BEGIN
    DECLARE K INT DEFAULT 0;
    WHILE (K < 100000) DO
            INSERT INTO BOOKS (TITLE,PUBYEAR)
            VALUES(CONCAT('Book ', K),
                   ROUND(RAND()*100));
            IF (MOD(K, 5000) = 0) THEN
                COMMIT;
            END IF;
            SET K = K + 1;
        END WHILE;
    COMMIT;
END $$

DELIMITER ;
CALL FillBooks();
SELECT * FROM BOOKS;

DELIMITER $$
DROP PROCEDURE IF EXISTS FillReaders;
CREATE PROCEDURE FillReaders()
BEGIN
    DECLARE K INT DEFAULT 0;
    WHILE (K < 100000) DO
            INSERT INTO READERS (FIRSTNAME,LASTNAME,PESELID)
            VALUES(CONCAT('Name ', K),
                   CONCAT('Surname ', K),
                   ROUND(RAND()*80000000));
            IF (MOD(K, 5000) = 0) THEN
                COMMIT;
            END IF;
            SET K = K + 1;
        END WHILE;
    COMMIT;
END $$

DELIMITER ;
CALL FillReaders();

EXPLAIN SELECT COUNT(*) FROM BOOKS where TITLE='Book 500';
CREATE INDEX BOOKSBYTITLE ON BOOKS (TITLE);
EXPLAIN SELECT COUNT(*) FROM BOOKS where TITLE='Book 500';

EXPLAIN SELECT COUNT(*) FROM READERS WHERE FIRSTNAME='John';
CREATE INDEX READERSBYFIRSTNAME ON READERS (FIRSTNAME);
EXPLAIN SELECT COUNT(*) FROM READERS WHERE FIRSTNAME='John';